<html>
  <head>
    <title>Iterators: exam - solutions</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
    <link rel="stylesheet" type="text/css" href="../../template/style.css">
  </head>
  <body>
    <div id='header'>
      <div id='logo'>
        <h1 id="title">Iterators: Exam Solutions</h1>
      </div>
    </div>

    <div id='contents'>
      <h2>Contents</h2>
      <ol>
        <li><a href="#iterators">Iterators</a>
        <ol>
          <li><a href="#iter-cross">Cross out the errors</a></li>
          <li><a href="#iter-fill">Fill in the blank</a></li>
        </ol>
        </li>
        <li><a href="#generators">Generators</a>
        <ol>
          <li><a href="#gen-code">Code-writing</a></li>
          <li><a href="#gen-fill">Fill in the blank</a></li>
        </ol>
        </li>
      </ol>
    </div>

    <h1 id="iterators">Iterators</h1>
    <h2 class="subtopic" id="iter-cross">Cross out the errors</h2> 

    <h3 class="question">Q1</h3>
    <pre class="codeblock">
    class Naturals:
        """Doctests.

        &gt;&gt;&gt; n = Naturals()
        &gt;&gt;&gt; i = iter(n)
        &gt;&gt;&gt; next(i)
        0
        &gt;&gt;&gt; next(i)
        1
        &gt;&gt;&gt; next(i)
        2
        """
        def __init__(self):
            self.cur = 0

        def __iter__(self):
        <b class="cross">def __iter__(self, start):</b>
            <b class="cross">self.cur = start</b>
            <b class="cross">while True:</b>
                <b class="cross">self.cur += 1</b>
                <b class="cross">return self.cur</b>
            return Nat_iter(self.cur)

        <b class="cross">def __next__(self):</b>
            <b class="cross">tmp = self.cur</b>
            <b class="cross">self.cur += 1</b>
            <b class="cross">return tmp</b>

    <b class="cross">class Nat_iter(Iterator)</b>
    class Nat_iter:
        <b class="cross">def __init__(self):</b>
        def __init__(self, start):
            self.cur = start

        <b class="cross">def __iter__(self):</b>
            <b class="cross">return self</b>

        def __next__(self):
            tmp = self.cur
            self.cur += 1
            return tmp
    </pre>

    <h2 class="subtopic" id="iter-fill">Fill in the blank</h2> 

    <h3 class="question">Q2</h3>
    <pre class="codeblock">
    class Rlist:
        def __init__(self, first, rest=None):
            self.first = first
            self.rest = rest
            self.curr = self

        def __iter__(self):
            return <b class="fill">self</b>

        def __next__(self):
            if self.curr == <b class="fill">None</b>
                raise <b class="fill">StopIteration</b>
            else:
                result = <b class="fill">self.curr.first</b>
                <b class="fill">self.curr</b> = self.curr.rest
                return result
    </pre>
    <p class="solution"><b>Explanation</b>: this is explained</p>


    <h1 id="iterators">Generators</h1>
    <h2 class="subtopic" id="gen-code">Code-writing</h2> 

    <h3 class="question">Q3</h3>
    <pre class="codeblock">
    def zip(iter1, iter2):
        while True:
            try:
                yield (next(iter1), next(iter2))
            except StopIteration:
                break
    </pre>

    <h2 class="subtopic" id="gen-fill">Fill in the blank</h2> 

    <h3 class="question">Q4</h3>
    <pre class="codeblock">
    def pascals():
        curr = <b class="fill">[1]</b>
        while True:
            yield curr
            i, new = 1, [1]
            while <b class="fill">i &lt; len(curr)</b>:
                new.append(<b class="fill">curr[i-1]</b> + <b class="fill">curr[i]</b>)
                i += 1
            new.append(1)
            curr = new
    </pre>

  </body>
</html>
