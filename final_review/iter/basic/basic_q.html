<html>
  <head>
    <title>Iterators: basic</title>
    <link rel="stylesheet" type="text/css" href="../../template/style.css">
  </head>
  <body>
    <h1 id="title">Iterators: Basic</h1>

    <div id='reference'>
      <p>You can review Iterators in the following places</p>
      <ul>
        <li>Lecture 32</li>
        <li>Discussion 12</li>
      </ul>
    </div>

    <div id='contents'>
      <h2>Contents</h2>
      <ol>
        <li><a href="#iterators">Iterators</a>
        <ol>
          <li><a href="#iter-conceptual">Conceptual</a></li>
          <li><a href="#iter-code">Code-writing</a></li>
          <li><a href="#iter-fill">Fill in the blank</a></li>
        </ol>
        </li>
        <li><a href="#generators">Generators</a>
        <ol>
          <li><a href="#gen-conceptual">Conceptual</a></li>
          <li><a href="#gen-code">Code-writing</a></li>
        </ol>
        </li>
      </ol>
    </div>

    <h2 class="subtopic" id="starter">Starter Code</h2>
    <p>Starter code can be found <a href="starter.py">here</a>.</p>
    <p>Description</p>

    <h1 id="iterators">Iterators</h1>

    <h2 class="subtopic" id="iter-conceptual">Conceptual</h2>

    <h3 class="question">Q1</h3>
    <p>Given any object <tt>obj</tt>, what special method will
    <tt>iter(obj)</tt> call? What type of object will it return?</p>
    
    <h3 class="question">Q2</h3>
    <p>What is wrong with the following code?</p>
    <pre class="codeblock">
    &gt;&gt;&gt; obj = SomeObj()
    &gt;&gt;&gt; i = iter(obj)
    &gt;&gt;&gt; next(obj)
    </pre>

    <h2 class="subtopic" id="iter-code">Code-writing</h2> 

    <h3 class="question">Q3</h3>
    <p>Write an iterator for a Fibonacci class. The iterator should
    return the next Fibonacci number every time <tt>next</tt> is called
    on it.</p>

    <pre class="codeblock">
    class Fibonacci:
        """Doctests

        &gt;&gt;&gt; f = Fibonacci()
        &gt;&gt;&gt; i = iter(f)
        &gt;&gt;&gt; next(i)
        0
        &gt;&gt;&gt; next(i)
        1
        &gt;&gt;&gt; next(i)
        1
        &gt;&gt;&gt; next(i)
        2
        """
        "*** YOUR CODE HERE ***"
    </pre>

    <h2 class="subtopic" id="iter-fill">Fill in the blank</h2> 

    <h3 class="question">Q4</h3>
    <p>Fill in the implementation of the iterator for the Rlist class.
    </p>
    <pre class="codeblock">
    class Rlist:
        """Doctests.

        &gt;&gt;&gt; r = Rlist(1, Rlist(2, Rlist(3)))
        &gt;&gt;&gt; for item in r:
        ...     print(item)
        1
        2
        3
        """
        def __init__(self, first, rest=None):
            self.first = first
            self.rest = rest
            self.curr = self

        def __iter__(self):
            return ______

        def __next__(self):
            if self.curr == ______:
                raise ________
            else:
                result = ______
                ______ = self.curr.rest
                return result
    </pre>


    <h1 id="generators">Generators</h1>

    <h2 class="subtopic" id="gen-conceptual">Conceptual</h2>

    <h3 class="question">Q5</h3>
    <p>Given the following generator function, what will the call to
    <tt>gen()</tt> return?</p>
    <pre class="codeblock">
    def gen():
        start = 0
        while start != 10:
            yield start
            start += 1

    gen()
    </pre>

    <h3 class="question">Q6</h3>
    <p>When does a generator raise a <tt>StopIteration</tt> exception?
    </p>


    <h2 class="subtopic" id="gen-code">Code-writing</h2> 

    <h3 class="question">Q7</h3>
    <p>Write a generator function <tt>map_gen</tt> that takes a 
    one-argument function and an iterator as arguments. The return 
    result should be a generator whose elements are the elements of 
    the iterator, but with the function mapped onto them.
    <pre class="codeblock">
    def map_gen(fn, iter1):
        """Doctests

        &gt;&gt;&gt; i = iter([1, 2, 3, 4])
        &gt;&gt;&gt; fn = lambda x: x**2
        &gt;&gt;&gt; m = map_gen(fn, i)
        &gt;&gt;&gt; next(m)
        1
        &gt;&gt;&gt; next(m)
        4
        &gt;&gt;&gt; next(m)
        9
        &gt;&gt;&gt; next(m)
        16
        &gt;&gt;&gt; next(m)
        Traceback (most recent call last):
          ...
        StopIteration
        """
        "*** YOUR CODE HERE ***"
    </pre>

    <h3 class="question">Q8</h3>
    <p>Write another iterator for a Fibonacci class. Like before, the 
    iterator should return the next Fibonacci number every time next 
    is called on it. This time, write the iterator using a generator 
    function.</p>
    </p>
    <pre class="codeblock">
    class Fibonacci:
        """Doctests.

        &gt;&gt;&gt; f = Fibonacci()
        &gt;&gt;&gt; i = iter(f)
        &gt;&gt;&gt; next(i)
        0
        &gt;&gt;&gt; next(i)
        1
        &gt;&gt;&gt; next(i)
        1
        &gt;&gt;&gt; next(i)
        2
        """
        "*** YOUR CODE HERE ***"
    </pre>

  </body>
</html>
