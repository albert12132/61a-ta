<html>
  <head>
    <title>Streams: basic - solutions</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
    <link rel="stylesheet" type="text/css" href="../../template/style.css">
  </head>
  <body>
    <div id='header'>
      <div id='logo'>
        <h1 id="title">Streams: Basic Solutions</h1>
      </div>
    </div>

    <div id='contents'>
      <h2>Contents</h2>
      <ol>
        <li><a href="#conceptual">Conceptual</a></li>
        <li><a href="#code">Code-writing</a></li>
      </ol>
    </div>

    <h2 class="subtopic" id="conceptual">Conceptual</h2>

    <h3 class="question">Q1</h3>
    <p>A stream can be used to "store" infinite data. Because the
    data is not computed until you need it, you can use memory more
    efficiently</p>

    <h3 class="question">Q2</h3>
    <p>Here is the signature of the Stream constructor:</p>
    <pre class="codeblock">
    Stream(item, compute_rest)
    </pre>
    <p><tt>compute_rest</tt> will be a function that computes the rest 
    of the Stream. How many arguments can <tt>compute_rest</tt> take? 
    What type of object must it return?</p>

    <p class="solution"><b>Answer</b>: <tt>compute_rest</tt> must take 
    zero arguments, or else the <tt>Stream.rest</tt> property method
    will not work. <tt>compute_rest</tt> must return another Stream
    object.</p>

    <h3 class="question">Q3</h3>
    <p class="solution"><b>Answer</b>: 0, 4, 8, 12, 16</p>


    <h2 class="subtopic" id="code">Code-writing</h2> 

    <h3 class="question">Q4</h3>
    <pre class="codeblock">
    def odd_stream():
        def compute_rest():
            return map_stream(lambda x: x + 2, odd_stream())
        return Stream(1, compute_rest)
    </pre>
    <p class="solution"><b>Explanation</b>: Let s = the result of
    odd_stream():</p>
    <pre class="codeblock">
    s = 1,    3,       5,       7,    ...
      = 1, (1 + 2), (3 + 2), (5 + 2), ...
    </pre>
    <p class="solution">The rest of <tt>s</tt> is just the elements
    of <tt>s</tt>, but with 2 added to each element.</p>

    <h3 class="question">Q5</h3>
    <pre class="codeblock">
    def reduce_first_k(s, k, combiner):
        total, s = s.first, s.rest
        while k &gt; 1 and s != Stream.empty:
            total = combiner(total, s.first)
            s = s.rest
            k -= 1
        return total
    </pre>
    <p class="solution"><b>Explanation</b>: We start the total with
    the first element of <tt>s</tt>. We keep iterating until <tt>k</tt>
    is equal to 1, because we've already visited the first element of
    <tt>s</tt> (so we only need to iterate <tt>k - 1</tt> times</p>

  </body>
</html>
