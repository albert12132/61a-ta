<html>
  <head>
    <title>Dynamic Scope: exam</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
    <link rel="stylesheet" type="text/css" href="../../template/style.css">
  </head>
  <body>
    <div id='header'>
      <div id='logo'>
        <h1 id="title">Dynamic Scope: Exam</h1>
      </div>
    </div>

    <div id='reference'>
      <p>You can review dynamic scope in the following places</p>
      <ul>
        <li>Lecture 29, towards the end</li>
        <li>Discussion 11</li>
      </ul>
    </div>

    <div id='contents'>
      <h2>Contents</h2>
      <ol>
        <li><a href="#env">Environment Diagrams</a></li>
      </ol>
    </div>


    <h2 class="subtopic" id="env">Environment Diagrams</h2>
    <p>Draw environment diagrams for the following programs, using
    <b class='prompt'>Dynamic</b> scoping.</p>

    <h3 class="question">Q1 (5pt)</h3>
    <pre class="codeblock">
    arthur = 'king'
    knights = []
    def camelot(table):
        knights = table[:]
        def quest(knight):
            knights.append(knight)
            knights[-2], knights[-1] = knights[-1], knights[-2]
        return quest

    camelot(knights)(arthur)
    </pre>

    <h3 class="question">Q2 (5pt)</h3>
    <pre class="codeblock">
    arthur = 'aardvark'
    def family():
        members = []
        def add(member):
            members.append(member)
        return family, members
    family, people = family()
    family('DW')
    </pre>

    <h3 class="question">Q3 (5pt)</h3>
    <pre class="codeblock">
    x, y = 3, 4
    def f1(x, y):
        def f2(a, b):
            return square(a) + square(y)
        return f2

    def square(a):
        return x * x

    f1(30, 40)(x, y)
    </pre>

    <h3 class="question">Q4 (5pt)</h3>
    <pre class="codeblock">
    def outer(x):
        def inner():
            return x + 2
        return inner

    inner = outer(4)

    def winner(x):
        def loser():
            return inner() + 2
        return loser() + x

    winner(2)
    </pre>
  </body>
</html>
