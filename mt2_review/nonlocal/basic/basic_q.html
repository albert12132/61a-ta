<html>
  <head>
    <title>Nonlocal Basics</title>
    <style type="text/css" href="../style.css"></style>
    <style type="text/css">
    ol {
      list-style-type:lower-alpha;    
    }
    </style>
  </head>
  <body>
    <h1>Nonlocal Basics</h1>
    <h2>Contents</h2>
    <ul class="contents">
      <li class="contents"><a class="ref" href="#basics">Basics</a></li>
      <li class="contents"><a class="ref" href="#env">Environment Diagrams</a></li>
    </ul>

    <h2 id="basics">Basics</h2>
    <p>1) Consider the following code:</p>
    <pre class="codeblock">
    def make_counter():
        count = 0
        def counter():
            count += 1
            return count
        return counter
    </pre>
    <p>Would this code work? If not, how would you fix it?</p>

    <p>2) Consider the following code:</p>
    <pre class="codeblock">
    def fn1(bob):
        def fn2(alice):
            def fn3(alice):
                def fn4():
                    nonlocal bob, alice
                    return bob + alice
                return fn4
            return fn3
        return fn2
    </pre>
    <ol>
      <li>In which function's frame does Python start looking for 
      <tt>alice</tt>?</li>
      <li>In which function's frame does Python stop looking for 
      <tt>alice</tt>?</li>
      <li>In which function's frame does Python start looking for 
      <tt>bob</tt>?</li>
      <li>In which function's frame does Python stop looking for 
      <tt>bob</tt>?</li>
    </ol>

    <p>3) Identify all the errors regarding nonlocal in the following
    code:</p>
    <pre class="codeblock">
    bob = 2
    def fn1(bob):
        joe = 3
        def fn2(alice):
            nonlocal bob, alice
            joe = 4
            return bob + alice
        return fn2
    </pre>

    <h2 id="env">Environment Diagrams</h2>
    <p>Draw environment diagrams for the following questions</p>
    <p>1)</p>
    <pre class="codeblock">
    &gt;&gt;&gt; def make_counter():
    ...     count = 0
    ...     def counter():
    ...         nonlocal count
    ...         count += 1
    ...         return count
    ...     return counter
    &gt;&gt;&gt; counter = make_counter()
    &gt;&gt;&gt; counter()
    ______
    &gt;&gt;&gt; counter()
    ______
    </pre>

    <p>2)</p>
    <pre class="codeblock">
    &gt;&gt;&gt; def foo():
    ...     lst = []
    ...     def bar(m):
    ...         nonlocal lst
    ...         lst = lst + [m]
    ...         return lst
    ...     return bar
    &gt;&gt;&gt; bar = foo()
    &gt;&gt;&gt; bar(3)
    ______
    &gt;&gt;&gt; bar(4)
    ______
    </pre>

    <p>3)</p>
    <pre class="codeblock">
    &gt;&gt;&gt; def foo():
    ...     lst = []
    ...     def bar(m):
    ...         lst.append(m)
    ...         return lst
    ...     return bar
    &gt;&gt;&gt; bar = foo()
    &gt;&gt;&gt; bar(3)
    ______
    &gt;&gt;&gt; bar(4)
    ______
    </pre>
  </body>
</html>
